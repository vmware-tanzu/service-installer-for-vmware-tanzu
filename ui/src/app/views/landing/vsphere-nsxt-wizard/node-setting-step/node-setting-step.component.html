<!--
    Copyright 2021 VMware, Inc
    SPDX-License-Identifier: BSD-2-Clause
-->
<form [formGroup]="formGroup" >
    <div *ngIf="this.apiClient.mgmtSegmentError" class="alert alert-danger" role="alert">
        <div class="alert-items">
            <div class="alert-item static">
                <div class="alert-icon-wrapper">
                    <clr-icon class="alert-icon" shape="exclamation-circle"></clr-icon>
                </div>
                <div class="newline">
                    <span class="alert-text">
                        {{ segmentErrorMsg }}
                    </span>
                </div>
            </div>
        </div>
        <button (click)="errorNotification = null" type="button" class="close" aria-label="Close">
            <clr-icon aria-hidden="true" shape="close"></clr-icon>
        </button>
    </div>
    <div *ngIf="errorNotification" class="alert alert-danger" role="alert">
        <div class="alert-items">
            <div class="alert-item static">
                <div class="alert-icon-wrapper">
                    <clr-icon class="alert-icon" shape="exclamation-circle"></clr-icon>
                </div>
                <span class="alert-text">
                    {{ errorNotification }}
                </span>
            </div>
        </div>
        <button (click)="errorNotification = null" type="button" class="close" aria-label="Close">
            <clr-icon aria-hidden="true" shape="close"></clr-icon>
        </button>
    </div>

    <h4 i18n="cluster settings" aria-level="2">
        Management Cluster Settings
    </h4>
    <!-- DEV or PROD Mode section -->
    <div class="clr-row">
        <div class="clr-col-lg-6 clr-col-12">
            <a class="card clickable" [ngClass]="{'card-selected': getEnvType()==='dev'}" (click)="cardClick('dev')"
               role="none">
                <div class="card-block">
                    <clr-icon class="card-icon" shape="computer" size="72">
                    </clr-icon>
                    <p class="card-title" i18n="development control plane title">
                        Development
                    </p>
                    <p i18n="development description" class="card-text">
                        Single control plane node. Recommended for a development environment.
                    </p>
                </div>
                <div class="card-footer">
                    <div class="clr-row" [attr.data-step-metadata]="formName">
                        <div class="clr-col-xl-4 clr-col-sm-12 clr-col-12 no-wrap">
                            <label i18n="instance type label" data-full="Development instance type">
                                INSTANCE TYPE
                                <clr-tooltip>
                                    <clr-icon aria-live="assertive" a11yTooltipTrigger shape="info-circle" size="22">
                                    </clr-icon>
                                    <clr-tooltip-content clrPosition="top-right" clrSize="lg" *clrIfOpen>
                                        <span>
                                            Choose the configuration for the control plane node VMs depending on
                                            the expected number of workload clusters to manage.
                                        </span>
                                    </clr-tooltip-content>
                                </clr-tooltip>
                            </label>
                        </div>
                        <div class="clr-col-xl-8 clr-col-sm-12 clr-col-12">
                            <clr-select-container class="node-type-container">
                                <select clrSelect class="node-type-select" name="devInstanceType"
                                        formControlName="devInstanceType" role="listbox"
                                        aria-label="development instance type"
                                        (click)="checkCustom()" (ngModelChange)="checkCustom()">
                                    <option aria-label="blank" title="blank"></option>
                                    <ng-container *ngFor="let nodeType of nodeTypes">
                                        <option [value]="nodeType.id">
                                            {{nodeType.name}}
                                        </option>
                                    </ng-container>
                                </select>
                                <clr-control-error>Selecting an instance type is required</clr-control-error>
                            </clr-select-container>
                        </div>
                    </div>
                </div>
            </a>
        </div>

        <div class="clr-col-lg-6 clr-col-12">
            <a class="card clickable" [ngClass]="{'card-selected': getEnvType()==='prod'}" (click)="cardClick('prod')"
               role="none">
                <div class="card-block">
                    <clr-icon class="card-icon" shape="building" size="72">
                    </clr-icon>
                    <p class="card-title" i18n="production control plane title">
                        Production
                    </p>
                    <p i18n="production description" class="card-text">
                        Three control plane nodes. Recommended for a production environment.
                    </p>
                </div>
                <div class="card-footer">
                    <div class="clr-row" [attr.data-step-metadata]="formName">
                        <div class="clr-col-xl-4 clr-col-sm-12 clr-col-12 no-wrap">
                            <label i18n="instance type label" data-full="Production instance type">
                                INSTANCE TYPE
                                <clr-tooltip>
                                    <clr-icon aria-live="assertive" a11yTooltipTrigger shape="info-circle" size="22">
                                    </clr-icon>
                                    <clr-tooltip-content clrPosition="top-right" clrSize="lg" *clrIfOpen>
                                        <span>
                                            Choose the configuration for the control plane node VMs depending on
                                            the expected number of workload clusters to manage.
                                        </span>
                                    </clr-tooltip-content>
                                </clr-tooltip>
                            </label>
                        </div>
                        <div class="clr-col-xl-8 clr-col-sm-12 clr-col-12">
                            <clr-select-container class="node-type-container">
                                <select clrSelect class="node-type-select" name="prodInstanceType"
                                        formControlName="prodInstanceType" role="listbox"
                                        aria-label="production instance type"
                                        (click)="checkCustom()" (ngModelChange)="checkCustom()">
                                    <option aria-label="blank" title="blank"></option>
                                    <ng-container *ngFor="let nodeType of nodeTypes">
                                        <option [value]="nodeType.id">
                                            {{nodeType.name}}
                                        </option>
                                    </ng-container>
                                </select>
                                <clr-control-error>Selecting an instance type is required</clr-control-error>
                            </clr-select-container>
                        </div>
                    </div>
                </div>
            </a>
        </div>
    </div>
    <!-- // Compliant Selection Section -->
    <!-- <ng-container *ngIf="!this.apiClient.tmcEnabled">
        <h5 i18n="cluster settings" aria-level="2">
            Activate compliant deployments
        </h5>
        <div *ngIf="formGroup.value['compliantDeployment']" class="alert alert-info" role="alert">
            <div class="alert-items">
                <div class="alert-item static">
                    <div class="alert-icon-wrapper">
                        <clr-icon class="alert-icon" shape="info-circle"></clr-icon>
                    </div>
                    <span class="alert-text" i18n="vsphere wizard step info notification">
                        With compliant deployments, only Ubuntu based latest Kubernetes images(v1.23.8) are supported.
                    </span>
                </div>
            </div>
        </div>
        <div class="clr-row">
            <div class="clr-col-12">
                <clr-toggle-container [attr.data-step-metadata]="formName">
                    <clr-toggle-wrapper>
                        <input
                                type="checkbox"
                                clrToggle
                                id="compliantDeployment"
                                name="compliantDeployment"
                                formControlName="compliantDeployment"
                                (change)="toggleCompliantDeployment()"
                                aria-describedby="compliantDeployment-helper"/>
                        <label>Enable Compliant deployment</label>
                    </clr-toggle-wrapper>
                </clr-toggle-container>
                <span id="compliantDeployment-helper" class="display-none">
                    Only latest verison of Ubunta OS is supported for compliant enabled deployments
                </span>
            </div>
        </div>
    </ng-container> -->
    <div class="clr-row">
        <div class="clr-col-12 clr-col-sm-6 clr-col-lg-4">
            <clr-input-container [attr.data-step-metadata]="formName">
                <label i18n="cluster name label" clr-control-label>
                    MANAGEMENT CLUSTER NAME
                    <clr-tooltip>
                        <clr-icon aria-live="assertive" a11yTooltipTrigger shape="info-circle" size="22"></clr-icon>
                        <clr-tooltip-content clrPosition="top-right" clrSize="lg" *clrIfOpen>
                            <span>
                                {{
                                    'Specify a name for the Management cluster.
                                Maximum cluster name length supported is 25 chars.'
                                }}
                            </span>
                        </clr-tooltip-content>
                    </clr-tooltip>
                </label>
                <input clrInput formControlName="clusterName" placeholder="Management Cluster" maxlength="25"/>
                <!--                       (ngModelChange)="onTkgMgmtValidateClick()" (blur)="onTkgMgmtValidateClick()"-->
                <!-- Add a empty helper to avoid accessiblity aria-describeby issue -->
                <clr-control-helper></clr-control-helper>
                <clr-control-error i18n="cluster name valid msg"
                                   *clrIfError="validatorEnum.VALID_CLUSTER_NAME">
                    Management Cluster name must start and end with a letter or number, and can contain only
                    lowercase letters, numbers, and hyphens.
                </clr-control-error>
                <clr-control-error i18n="cluster name valid msg" *clrIfError="validatorEnum.WHITESPACE">
                    Management Cluster Name must not include whitespace on ends.
                </clr-control-error>
                <clr-control-error i18n="cluster name required msg" *clrIfError="validatorEnum.REQUIRED">
                    Cluster name is required
                </clr-control-error>
            </clr-input-container>
        </div>
        <ng-container *ngIf="this.apiClient.tmcEnabled">
            <div class="clr-col-12 clr-col-sm-6 clr-col-lg-4">
                <clr-select-container [attr.data-step-metadata]="formName">
                    <label i18n="datacenter label">
                        CLUSTER GROUP
                        <clr-tooltip>
                            <clr-icon aria-live="assertive" a11yTooltipTrigger shape="info-circle" size="22"></clr-icon>
                            <clr-tooltip-content clrPosition="top-right" clrSize="lg" *clrIfOpen>
                                <span>
                                    Provide name of the cluster group to be attached to the Management Cluster.
                                </span>
                            </clr-tooltip-content>
                        </clr-tooltip>
                    </label>
                    <select clrSelect name="clusterGroupName" formControlName="clusterGroupName">
                        <option aria-label="blank" title="blank"></option>
                        <ng-container *ngFor="let clusterGroupName of this.apiClient.clusterGroups">
                            <option [value]="clusterGroupName">
                                {{clusterGroupName}}
                            </option>
                        </ng-container>
                    </select>
                    <!-- Add a empty helper to avoid accessiblity aria-describeby issue -->
                    <clr-control-helper></clr-control-helper>
                    <clr-control-error i18n="control plane endpoint required msg"
                                    *clrIfError="validatorEnum.REQUIRED">
                        Selecting a cluster group name is required
                    </clr-control-error>
                </clr-select-container>
            </div>
        </ng-container>
    </div>


        <!--        <div class="clr-col-12 clr-col-sm-6 clr-col-lg-4">-->
        <!--            <clr-input-container [attr.data-step-metadata]="formName">-->
        <!--                <label class="hidden" i18n="load balancer template label">-->
        <!--                    CONTROL PLANE ENDPOINT (OPTIONAL)-->
        <!--                    <clr-tooltip>-->
        <!--                        <clr-icon aria-live="assertive" a11yTooltipTrigger shape="info-circle" size="22"></clr-icon>-->
        <!--                        <clr-tooltip-content clrPosition="top-right" clrSize="lg" *clrIfOpen>-->
        <!--                            <span>-->
        <!--                                Control plane IP for Management cluster is to be specified.-->
        <!--                            </span>-->
        <!--                        </clr-tooltip-content>-->
        <!--                    </clr-tooltip>-->
        <!--                </label>-->
        <!--                <input clrInput formControlName="controlPlaneEndpointIP" placeholder="192.168.0.1"/>-->
        <!--&lt;!&ndash;                       (ngModelChange)="onTkgMgmtValidateClick()" (blur)="onTkgMgmtValidateClick()"&ndash;&gt;-->
        <!--                &lt;!&ndash; Add a empty helper to avoid accessiblity aria-describeby issue &ndash;&gt;-->
        <!--                <clr-control-helper></clr-control-helper>-->
        <!--                <clr-control-error i18n="control plane endpoint required msg" *clrIfError="validatorEnum.REQUIRED">-->
        <!--                    Control Plane Endpoint is required!-->
        <!--                </clr-control-error>-->
        <!--                <clr-control-error i18n="control plane endpoint format msg"-->
        <!--                                   *clrIfError="validatorEnum.VALID_IP_OR_FQDN">-->
        <!--                    Control Plane Endpoint format is invalid!-->
        <!--                </clr-control-error>-->
        <!--            </clr-input-container>-->
        <!--        </div>-->

        <!--        <div class="clr-col-12 clr-col-sm-6 clr-col-lg-4">-->
        <!--            <clr-select-container [attr.data-step-metadata]="formName">-->
        <!--                <label i18n="datacenter label">-->
        <!--                    NETWORK SEGMENT NAME-->
        <!--                    <clr-tooltip>-->
        <!--                        <clr-icon aria-live="assertive" a11yTooltipTrigger shape="info-circle" size="22"></clr-icon>-->
        <!--                        <clr-tooltip-content clrPosition="top-right" clrSize="lg" *clrIfOpen>-->
        <!--                            <span>-->
        <!--                                Name of the segment in vCenter Server.-->
        <!--                            </span>-->
        <!--                        </clr-tooltip-content>-->
        <!--                    </clr-tooltip>-->
        <!--                </label>-->
        <!--                <select clrSelect name="segmentName" formControlName="segmentName">-->
        <!--                    <option aria-label="blank" title="blank"></option>-->
        <!--                    <ng-container *ngFor="let segmentName of networks">-->
        <!--                        <option [value]="segmentName">-->
        <!--                            {{segmentName}}-->
        <!--                        </option>-->
        <!--                    </ng-container>-->
        <!--                </select>-->
        <!--                &lt;!&ndash; Add a empty helper to avoid accessiblity aria-describeby issue &ndash;&gt;-->
        <!--                <clr-control-helper></clr-control-helper>-->
        <!--                <clr-control-error>Selecting a segment is required</clr-control-error>-->
        <!--            </clr-select-container>-->
        <!--        </div>-->

    <!-- Network Segment name, Gateway cidr Section -->
    <div class="clr-row">
        <div class="clr-col-12 clr-col-sm-6 clr-col-lg-4">
            <clr-select-container [attr.data-step-metadata]="formName">
                <label i18n="datacenter label">
                    NETWORK SEGMENT NAME
                    <clr-tooltip>
                        <clr-icon aria-live="assertive" a11yTooltipTrigger shape="info-circle" size="22"></clr-icon>
                        <clr-tooltip-content clrPosition="top-right" clrSize="lg" *clrIfOpen>
                            <span>
                                Name of the network segment for Management Cluster in vCenter Server.
                            </span>
                        </clr-tooltip-content>
                    </clr-tooltip>
                </label>
                <select clrSelect name="segmentName" formControlName="segmentName">
                    <!--                        (ngModelChange)="onTkgMgmtValidateClick()" (blur)="onTkgMgmtValidateClick()"-->
                    <option aria-label="blank" title="blank"></option>
                    <ng-container *ngFor="let segmentName of this.apiClient.networks">
                        <option [value]="segmentName">
                            {{segmentName}}
                        </option>
                    </ng-container>
                </select>
                <!-- Add a empty helper to avoid accessiblity aria-describeby issue -->
                <clr-control-helper></clr-control-helper>
                <clr-control-error i18n="control plane endpoint required msg"
                                   *clrIfError="validatorEnum.REQUIRED">
                    Selecting a segment name is required
                </clr-control-error>
            </clr-select-container>
        </div>
        <div class="clr-col-12 clr-col-sm-6 clr-col-lg-4">
            <clr-input-container [attr.data-step-metadata]="formName">
                <label class="hidden" i18n="load balancer template label">
                    GATEWAY CIDR
                    <clr-tooltip>
                        <clr-icon aria-live="assertive" a11yTooltipTrigger shape="info-circle" size="22"></clr-icon>
                        <clr-tooltip-content clrPosition="top-right" clrSize="lg" *clrIfOpen>
                            <span>
                                Please specify Gateway CIDR to be configured for Management Cluster.
                            </span>
                        </clr-tooltip-content>
                    </clr-tooltip>
                </label>
                <input clrInput formControlName="gatewayAddress" placeholder="192.168.0.1/24"/>
                <!--                       (ngModelChange)="onTkgMgmtValidateClick()" (blur)="onTkgMgmtValidateClick()"-->
                <!-- Add a empty helper to avoid accessiblity aria-describeby issue -->
                <clr-control-helper></clr-control-helper>
                <clr-control-error i18n="gateway address required msg" *clrIfError="validatorEnum.REQUIRED">
                    Gateway CIDR is required!
                </clr-control-error>
                <clr-control-error i18n="gateway address format msg"
                                   *clrIfError="validatorEnum.VALID_IP">
                    Gateway CIDR is invalid!
                </clr-control-error>
                <clr-control-error i18n="cluster service cidr required msg" *clrIfError="validatorEnum.NETWORKING_IP_UNIQUE">
                    Gateway CIDR must be unique!
                </clr-control-error>
                <clr-control-error i18n="cluster service cidr required msg" *clrIfError="validatorEnum.WHITESPACE">
                    Gateway CIDR has whitespaces on ends!
                </clr-control-error>
            </clr-input-container>
        </div>
    </div>
    <!-- Custom Resource configuration, size, mem, cpu -->
    <ng-container *ngIf="formGroup.value['devInstanceType'] === 'custom' || formGroup.value['prodInstanceType'] === 'custom'">
        <h5 i18n="cluster settings" aria-level="2">
            Resource Configuration
        </h5>
        <div class="clr-row">
            <div class="clr-col-12 clr-col-sm-6 clr-col-lg-4">
                <clr-input-container [attr.data-step-metadata]="formName">
                    <label class="hidden" i18n="load balancer template label">
                        CPU SIZE (vCPU)
                        <clr-tooltip>
                            <clr-icon aria-live="assertive" a11yTooltipTrigger shape="info-circle" size="22"></clr-icon>
                            <clr-tooltip-content clrPosition="top-right" clrSize="lg" *clrIfOpen>
                                <span>
                                    Please specify Custom CPU Size in GB, min value is 2.
                                </span>
                            </clr-tooltip-content>
                        </clr-tooltip>
                    </label>
                    <input clrInput formControlName="mgmtCpu" type="number" min=2 placeholder=""/>
                    <clr-control-helper></clr-control-helper>
                    <clr-control-error i18n="gateway address required msg" *clrIfError="validatorEnum.REQUIRED">
                        CPU size is required!
                    </clr-control-error>
                    <clr-control-error i18n="gateway address format msg"
                                       *clrIfError="validatorEnum.MIN">
                        Minimum CPU size is 2!
                    </clr-control-error>
                    <clr-control-error i18n="gateway address format msg"
                                       *clrIfError="validatorEnum.WHITESPACE">
                        Management Cluster CIDR has whitespaces on ends!
                    </clr-control-error>
                </clr-input-container>
            </div>
            <div class="clr-col-12 clr-col-sm-6 clr-col-lg-4">
                <clr-input-container [attr.data-step-metadata]="formName">
                    <label class="hidden" i18n="load balancer template label">
                        MEMORY SIZE (GB)
                        <clr-tooltip>
                            <clr-icon aria-live="assertive" a11yTooltipTrigger shape="info-circle" size="22"></clr-icon>
                            <clr-tooltip-content clrPosition="top-right" clrSize="lg" *clrIfOpen>
                                <span>
                                    Please specify Custom Memory Size in GB, min value is 4 GB.
                                </span>
                            </clr-tooltip-content>
                        </clr-tooltip>
                    </label>
                    <input clrInput formControlName="mgmtMemory" type="number" min=4 placeholder=""/>
                    <clr-control-helper></clr-control-helper>
                    <clr-control-error i18n="gateway address required msg" *clrIfError="validatorEnum.REQUIRED">
                        Memory size is required!
                    </clr-control-error>
                    <clr-control-error i18n="gateway address format msg"
                                       *clrIfError="validatorEnum.MIN">
                        Minimum Memory size is 4 GB!
                    </clr-control-error>
                    <clr-control-error i18n="gateway address format msg"
                                       *clrIfError="validatorEnum.WHITESPACE">
                        Memory size has whitespaces on ends!
                    </clr-control-error>
                </clr-input-container>
            </div>
            <div class="clr-col-12 clr-col-sm-6 clr-col-lg-4">
                <clr-input-container [attr.data-step-metadata]="formName">
                    <label class="hidden" i18n="load balancer template label">
                        STORAGE SIZE (GB)
                        <clr-tooltip>
                            <clr-icon aria-live="assertive" a11yTooltipTrigger shape="info-circle" size="22"></clr-icon>
                            <clr-tooltip-content clrPosition="top-right" clrSize="lg" *clrIfOpen>
                                <span>
                                    Please specify Custom Storage Size in GB, min value is 20 GB.
                                </span>
                            </clr-tooltip-content>
                        </clr-tooltip>
                    </label>
                    <input clrInput formControlName="mgmtStorage" type="number" min=20 placeholder=""/>
                    <clr-control-helper></clr-control-helper>
                    <clr-control-error i18n="gateway address required msg" *clrIfError="validatorEnum.REQUIRED">
                        Storage size is required!
                    </clr-control-error>
                    <clr-control-error i18n="gateway address format msg"
                                       *clrIfError="validatorEnum.MIN">
                        Minimum Storage size is 20 GB!
                    </clr-control-error>
                    <clr-control-error i18n="gateway address format msg"
                                       *clrIfError="validatorEnum.WHITESPACE">
                        Storage size has whitespaces on ends!
                    </clr-control-error>
                </clr-input-container>
            </div>
        </div>
    </ng-container>
    <!-- Base os image, cluster cidr, service cidr -->
    <div class="clr-row">
        <div class="clr-col-12 clr-col-sm-6 clr-col-lg-4">
            <clr-select-container [attr.data-step-metadata]="formName">
                <label i18n="datacenter label">
                    BASE OS IMAGE
                    <clr-tooltip>
                        <clr-icon aria-live="assertive" a11yTooltipTrigger shape="info-circle" size="22"></clr-icon>
                        <clr-tooltip-content clrPosition="top-right" clrSize="lg" *clrIfOpen>
                            <span>
                                Select the Base OS Image for Management Cluster nodes.
                            </span>
                        </clr-tooltip-content>
                    </clr-tooltip>
                </label>
                <select clrSelect name="baseImage" formControlName="baseImage">
                    <option aria-label="blank" title="blank"></option>
                    <ng-container *ngFor="let baseImage of this.apiClient.baseImage">
                        <option [value]="baseImage">
                            {{baseImage}}
                        </option>
                    </ng-container>
                </select>
                <!-- Add a empty helper to avoid accessiblity aria-describeby issue -->
                <clr-control-helper></clr-control-helper>
                <clr-control-error i18n="control plane endpoint required msg"
                                   *clrIfError="validatorEnum.REQUIRED">
                    Selecting a base OS image is required!
                </clr-control-error>
            </clr-select-container>
        </div>
        <div class="clr-col-12 clr-col-sm-6 clr-col-lg-4">
            <clr-input-container [attr.data-step-metadata]="formName">
                <label class="hidden" i18n="load balancer template label">
                    CLUSTER CIDR
                    <clr-tooltip>
                        <clr-icon aria-live="assertive" a11yTooltipTrigger shape="info-circle" size="22"></clr-icon>
                        <clr-tooltip-content clrPosition="top-right" clrSize="lg" *clrIfOpen>
                            <span>
                                The Cluster CIDR for Management Cluster is by default : 100.96.0.0/11, Edit the field if needed
                            </span>
                        </clr-tooltip-content>
                    </clr-tooltip>
                </label>
                <input clrInput formControlName="clusterCidr" placeholder="100.96.0.0/11"/>
                <clr-control-helper></clr-control-helper>
                <clr-control-error i18n="gateway address required msg" *clrIfError="validatorEnum.REQUIRED">
                    Management Cluster CIDR is required!
                </clr-control-error>
                <clr-control-error i18n="gateway address format msg"
                                   *clrIfError="validatorEnum.VALID_IP">
                    Management Cluster CIDR is invalid!
                </clr-control-error>
                <clr-control-error i18n="gateway address format msg"
                                   *clrIfError="validatorEnum.WHITESPACE">
                    Management Cluster CIDR has whitespaces on ends!
                </clr-control-error>
            </clr-input-container>
        </div>
        <div class="clr-col-12 clr-col-sm-6 clr-col-lg-4">
            <clr-input-container [attr.data-step-metadata]="formName">
                <label class="hidden" i18n="load balancer template label">
                    SERVICE CIDR
                    <clr-tooltip>
                        <clr-icon aria-live="assertive" a11yTooltipTrigger shape="info-circle" size="22"></clr-icon>
                        <clr-tooltip-content clrPosition="top-right" clrSize="lg" *clrIfOpen>
                            <span>
                                The Service CIDR for Management Cluster is by default : 100.64.0.0/13, Edit the field if needed
                            </span>
                        </clr-tooltip-content>
                    </clr-tooltip>
                </label>
                <input clrInput formControlName="serviceCidr" placeholder="100.64.0.0/13"/>
                <clr-control-helper></clr-control-helper>
                <clr-control-error i18n="gateway address required msg" *clrIfError="validatorEnum.REQUIRED">
                    Service CIDR for Management Cluster is required!
                </clr-control-error>
                <clr-control-error i18n="gateway address format msg"
                                   *clrIfError="validatorEnum.VALID_IP">
                    Service CIDR for Management Cluster is invalid!
                </clr-control-error>
                <clr-control-error i18n="gateway address format msg"
                                   *clrIfError="validatorEnum.WHITESPACE">
                    Service CIDR for Management Cluster has whitespaces on ends!
                </clr-control-error>
            </clr-input-container>
        </div>
    </div>
    <!-- identity management -->
    <ng-container *ngIf="this.apiClient.enableIdentityManagement">
        <br>
        <h4 i18n="Proxy Settings" class="sub-title" aria-level="2">
            Optionally Create RBAC configurations
        </h4>
        <div *ngIf="rbacErrorClusterAdmin" class="alert alert-danger" role="alert">
            <div class="alert-items">
                <div class="alert-item static">
                    <div class="alert-icon-wrapper">
                        <clr-icon class="alert-icon" shape="exclamation-circle"></clr-icon>
                    </div>
                    <span class="alert-text">
                        {{ errorRBACClusterAdmin }}
                    </span>
                </div>
            </div>
            <button (click)="rbacErrorClusterAdmin = false" type="button" class="close" aria-label="Close">
                <clr-icon aria-hidden="true" shape="close"></clr-icon>
            </button>
        </div>
        <div *ngIf="rbacErrorAdmin" class="alert alert-danger" role="alert">
            <div class="alert-items">
                <div class="alert-item static">
                    <div class="alert-icon-wrapper">
                        <clr-icon class="alert-icon" shape="exclamation-circle"></clr-icon>
                    </div>
                    <span class="alert-text">
                        {{ errorRBACAdmin }}
                    </span>
                </div>
            </div>
            <button (click)="rbacErrorAdmin = false" type="button" class="close" aria-label="Close">
                <clr-icon aria-hidden="true" shape="close"></clr-icon>
            </button>
        </div>
        <div *ngIf="rbacErrorEdit" class="alert alert-danger" role="alert">
            <div class="alert-items">
                <div class="alert-item static">
                    <div class="alert-icon-wrapper">
                        <clr-icon class="alert-icon" shape="exclamation-circle"></clr-icon>
                    </div>
                    <span class="alert-text">
                        {{ errorRBACEdit }}
                    </span>
                </div>
            </div>
            <button (click)="rbacErrorEdit = false" type="button" class="close" aria-label="Close">
                <clr-icon aria-hidden="true" shape="close"></clr-icon>
            </button>
        </div>
        <div *ngIf="rbacErrorView" class="alert alert-danger" role="alert">
            <div class="alert-items">
                <div class="alert-item static">
                    <div class="alert-icon-wrapper">
                        <clr-icon class="alert-icon" shape="exclamation-circle"></clr-icon>
                    </div>
                    <span class="alert-text">
                        {{ errorRBACView }}
                    </span>
                </div>
            </div>
            <button (click)="rbacErrorView = false" type="button" class="close" aria-label="Close">
                <clr-icon aria-hidden="true" shape="close"></clr-icon>
            </button>
        </div>
        <div class="clr-row">
            <div class="clr-col-12 clr-col-sm-6 clr-col-lg-4">
                <clr-input-container [attr.data-step-metadata]="formName">
                    <label i18n="http proxy url label" clr-control-label>
                        CLUSTER ADMIN ROLE (OPTIONAL)
                        <clr-tooltip>
                            <clr-icon aria-live="assertive" a11yTooltipTrigger shape="info-circle" size="22"></clr-icon>
                            <clr-tooltip-content clrPosition="top-right" clrSize="lg" *clrIfOpen>
                                <span>
                                    Specify comma separated list of users to grant them Cluster Admin privileges
                                </span>
                            </clr-tooltip-content>
                        </clr-tooltip>
                    </label>
                    <input clrInput name="clusterAdminUsers" formControlName="clusterAdminUsers" placeholder="ex: username, email"
                            (ngModelChange)="onClusterAdminFieldChange()"/>
                    <clr-control-helper></clr-control-helper>
                    <clr-control-error i18n="http proxy url required msg" *clrIfError="validatorEnum.WHITESPACE">
                        Field has whitespaces on ends!
                    </clr-control-error>
                </clr-input-container>
            </div>
            <div class="clr-col-12 clr-col-sm-6 clr-col-lg-4">
                <clr-input-container [attr.data-step-metadata]="formName">
                    <label i18n="http proxy url label" clr-control-label>
                        ADMIN ROLE (OPTIONAL)
                        <clr-tooltip>
                            <clr-icon aria-live="assertive" a11yTooltipTrigger shape="info-circle" size="22"></clr-icon>
                            <clr-tooltip-content clrPosition="top-right" clrSize="lg" *clrIfOpen>
                                <span>
                                    Specify comma separated list of users to grant them Admin privileges
                                </span>
                            </clr-tooltip-content>
                        </clr-tooltip>
                    </label>
                    <input clrInput name="adminUsers" formControlName="adminUsers" placeholder="ex: username, email"
                            (ngModelChange)="onAdminFieldChange()"/>
                    <clr-control-helper></clr-control-helper>
                    <clr-control-error i18n="http proxy url required msg" *clrIfError="validatorEnum.WHITESPACE">
                        Field has whitespaces on ends!
                    </clr-control-error>
                </clr-input-container>
            </div>
        </div>
        <div class="clr-row">
            <div class="clr-col-12 clr-col-sm-6 clr-col-lg-4">
                <clr-input-container [attr.data-step-metadata]="formName">
                    <label i18n="http proxy url label" clr-control-label>
                        EDIT ROLE (OPTIONAL)
                        <clr-tooltip>
                            <clr-icon aria-live="assertive" a11yTooltipTrigger shape="info-circle" size="22"></clr-icon>
                            <clr-tooltip-content clrPosition="top-right" clrSize="lg" *clrIfOpen>
                                <span>
                                    Specify comma separated list of users to grant them Edit privileges
                                </span>
                            </clr-tooltip-content>
                        </clr-tooltip>
                    </label>
                    <input clrInput name="editUsers" formControlName="editUsers" placeholder="ex: username, email"
                            (ngModelChange)="onEditFieldChange()"/>
                    <clr-control-helper></clr-control-helper>
                    <clr-control-error i18n="http proxy url required msg" *clrIfError="validatorEnum.WHITESPACE">
                        Field has whitespaces on ends!
                    </clr-control-error>
                </clr-input-container>
            </div>
            <div class="clr-col-12 clr-col-sm-6 clr-col-lg-4">
                <clr-input-container [attr.data-step-metadata]="formName">
                    <label i18n="http proxy url label" clr-control-label>
                        VIEW ROLE (OPTIONAL)
                        <clr-tooltip>
                            <clr-icon aria-live="assertive" a11yTooltipTrigger shape="info-circle" size="22"></clr-icon>
                            <clr-tooltip-content clrPosition="top-right" clrSize="lg" *clrIfOpen>
                                <span>
                                    Specify comma separated list of users to grant them View privileges
                                </span>
                            </clr-tooltip-content>
                        </clr-tooltip>
                    </label>
                    <input clrInput name="viewUsers" formControlName="viewUsers" placeholder="ex: username, email"
                            (ngModelChange)="onViewFieldChange()"/>
                    <clr-control-helper></clr-control-helper>
                    <clr-control-error i18n="http proxy url required msg" *clrIfError="validatorEnum.WHITESPACE">
                        Field has whitespaces on ends!
                    </clr-control-error>
                </clr-input-container>
            </div>
        </div>
    </ng-container>
    <br>
    <h4 i18n="Proxy Settings" class="sub-title" aria-level="2">
        Proxy Settings
    </h4>
    <div class="clr-row">
        <div class="clr-col-12">
            <clr-toggle-container [attr.data-step-metadata]="formName">
                <clr-toggle-wrapper>
                    <input
                            type="checkbox"
                            clrToggle
                            id="proxySettings"
                            name="proxySettings"
                            formControlName="proxySettings"
                            (change)="toggleProxySetting()"
                            aria-describedby="proxySettings-helper"/>
                    <label>Enable Proxy Settings for Management Cluster</label>
                </clr-toggle-wrapper>
            </clr-toggle-container>
            <span id="proxySettings-helper" class="display-none">
                Enabling proxy settings exposes addition fields and disabling will hide those fields
            </span>
        </div>
    </div>

    <ng-container *ngIf="formGroup.value['proxySettings']">
        <div class="clr-row">
            <div class="clr-col-12 clr-col-sm-6 clr-col-lg-4">
                <clr-input-container [attr.data-step-metadata]="formName">
                    <label i18n="http proxy url label" clr-control-label>
                        HTTP PROXY URL
                        <clr-tooltip>
                            <clr-icon aria-live="assertive" a11yTooltipTrigger shape="info-circle" size="22"></clr-icon>
                            <clr-tooltip-content clrPosition="top-right" clrSize="lg" *clrIfOpen>
                                <span>
                                    HTTP proxy URL to be configured globally in the {{ clusterType }} cluster for accessing infrastructure
                                    deployed behind the proxy.
                                </span>
                            </clr-tooltip-content>
                        </clr-tooltip>
                    </label>
                    <input clrInput name="httpProxyUrl" formControlName="httpProxyUrl" placeholder="http://exampleUrl:PORT" />
                    <!-- Add a empty helper to avoid accessiblity aria-describeby issue -->
                    <clr-control-helper></clr-control-helper>
                    <clr-control-error i18n="http proxy url required msg" *clrIfError="validatorEnum.REQUIRED">
                        Http proxy url cannot be empty
                    </clr-control-error>
                    <clr-control-error i18n="http(s) required msg" *clrIfError="validatorEnum.HTTP_OR_HTTPS">
                        http:// prefix is missing
                    </clr-control-error>
                    <clr-control-error i18n="http proxy url required msg" *clrIfError="validatorEnum.WHITESPACE">
                        Http proxy url has whitespaces on ends!
                    </clr-control-error>
                </clr-input-container>
            </div>
            <div class="clr-col-12 clr-col-sm-6 clr-col-lg-4">
                <clr-input-container [attr.data-step-metadata]="formName">
                    <label i18n="http proxy username label" clr-control-label>
                        HTTP PROXY USERNAME (OPTIONAL)
                    </label>
                    <input clrInput name="httpProxyUsername" formControlName="httpProxyUsername" placeholder="Username" />
                    <!-- Add a empty helper to avoid accessiblity aria-describeby issue -->
                    <clr-control-helper></clr-control-helper>
                    <clr-control-error i18n="http proxy url required msg" *clrIfError="validatorEnum.WHITESPACE">
                        Http proxy Username has whitespaces on ends!
                    </clr-control-error>
                </clr-input-container>
            </div>
            <div class="clr-col-12 clr-col-sm-6 clr-col-lg-4">
                <clr-password-container [attr.data-step-metadata]="formName">
                    <label i18n="http proxy password label" clr-control-label>
                        HTTP PROXY PASSWORD (OPTIONAL)
                    </label>
                    <input clrPassword name="httpProxyPassword" formControlName="httpProxyPassword" placeholder="Password" />
                    <!-- Add a empty helper to avoid accessiblity aria-describeby issue -->
                    <clr-control-helper></clr-control-helper>
                </clr-password-container>
            </div>
        </div>
        <div class="clr-row">
            <div class="clr-col-12">
                <div class="checkbox-wrapper" [attr.data-step-metadata]="formName">
                    <clr-checkbox-wrapper>
                        <input type="checkbox" clrCheckbox name="isSameAsHttp" formControlName="isSameAsHttp" (change)="
                        toggleProxySetting()"/>
                        <label>Use same configuration for https proxy</label>
                    </clr-checkbox-wrapper>
                </div>
            </div>
        </div>
        <div class="clr-row" *ngIf="!formGroup.value.isSameAsHttp">
            <div class="clr-col-12 clr-col-sm-6 clr-col-lg-4">
                <clr-input-container [attr.data-step-metadata]="formName">
                    <label i18n="https proxy url label" clr-control-label>
                        HTTPS PROXY URL
                        <clr-tooltip>
                            <clr-icon aria-live="assertive" a11yTooltipTrigger shape="info-circle" size="22"></clr-icon>
                            <clr-tooltip-content clrPosition="top-right" clrSize="lg" *clrIfOpen>
                                <span>
                                    HTTPS proxy URL to be configured globally in the {{ clusterType }} cluster for accessing infrastructure
                                    deployed behind the proxy.
                                </span>
                            </clr-tooltip-content>
                        </clr-tooltip>
                    </label>
                    <input clrInput name="httpsProxyUrl" formControlName="httpsProxyUrl" placeholder="https://exampleUrl:PORT" />
                    <!-- Add a empty helper to avoid accessiblity aria-describeby issue -->
                    <clr-control-helper></clr-control-helper>
                    <clr-control-error i18n="https proxy url required msg" *clrIfError="validatorEnum.REQUIRED">
                        Https proxy url cannot be empty
                    </clr-control-error>
                    <clr-control-error i18n="https required msg" *clrIfError="validatorEnum.HTTP_OR_HTTPS">
                        https:// prefix is missing
                    </clr-control-error>
                    <clr-control-error i18n="http proxy url required msg" *clrIfError="validatorEnum.WHITESPACE">
                        Https proxy url has whitespaces on ends!
                    </clr-control-error>
                </clr-input-container>
            </div>
            <div class="clr-col-12 clr-col-sm-6 clr-col-lg-4">
                <clr-input-container [attr.data-step-metadata]="formName">
                    <label i18n="https proxy username label" clr-control-label>
                        HTTPS PROXY USERNAME (OPTIONAL)
                    </label>
                    <input clrInput name="httpsProxyUsername" formControlName="httpsProxyUsername" placeholder="Username" />
                    <!-- Add a empty helper to avoid accessiblity aria-describeby issue -->
                    <clr-control-helper></clr-control-helper>
                    <clr-control-error i18n="http proxy url required msg" *clrIfError="validatorEnum.WHITESPACE">
                        Https proxy Username has whitespaces on ends!
                    </clr-control-error>
                </clr-input-container>
            </div>
            <div class="clr-col-12 clr-col-sm-6 clr-col-lg-4">
                <clr-password-container [attr.data-step-metadata]="formName">
                    <label i18n="https proxy password label" clr-control-label>
                        HTTPS PROXY PASSWORD (OPTIONAL)
                    </label>
                    <input clrPassword name="httpsProxyPassword" formControlName="httpsProxyPassword" placeholder="Password" />
                    <!-- Add a empty helper to avoid accessiblity aria-describeby issue -->
                    <clr-control-helper></clr-control-helper>
                </clr-password-container>
            </div>
        </div>
        <div class="clr-row">
            <div class="clr-col-4">
                <clr-input-container [attr.data-step-metadata]="formName" class="word-break">
                    <label i18n="no proxy label" clr-control-label>
                        NO PROXY (OPTIONAL)
                        <clr-tooltip>
                            <clr-icon aria-live="assertive" a11yTooltipTrigger shape="info-circle" size="22"></clr-icon>
                            <clr-tooltip-content clrPosition="top-right" clrSize="lg" *clrIfOpen>
                                <span *ngIf="!enableNetworkName">
                                    A comma separated list of network CIDRs or host names. Example: noproxy.yourdomain.com,192.168.0.0/24.
                                </span>
                                <span *ngIf="enableNetworkName">
                                    A comma separated list of network CIDRs or host names. Example: noproxy.yourdomain.com,192.168.0.0/24.
                                    It is recommended that you enter the VM CIDR range for the VM network selected above.
                                    Failing to do so will result in traffic between api-server and kubelet being forwarded
                                    to the proxy, impacting kubectl log commands.
                                </span>
                            </clr-tooltip-content>
                        </clr-tooltip>
                    </label>
                    <input clrInput name="noProxy" formControlName="noProxy" placeholder="noproxy.yourdomain.com, 192.168.0.0/24" />
                    <clr-control-helper *ngIf="fullNoProxy">
                        <div class="title">FULL NO PROXY LIST</div>
                        {{fullNoProxy}}
                    </clr-control-helper>
                    <clr-control-error i18n="http proxy url required msg" *clrIfError="validatorEnum.WHITESPACE">
                        No Proxy has whitespaces on ends!
                    </clr-control-error>
                </clr-input-container>
            </div>
            <!-- Proxy Certificate -->
            <div class="clr-col-12 clr-col-lg-4">
                <div class="clr-form-control" [attr.data-step-metadata]="formName">
                    <label for="proxyCert" class="clr-control-label" >
                        PROXY CERTIFICATE (OPTIONAL)
                        <clr-tooltip>
                            <clr-icon aria-live="assertive" a11yTooltipTrigger shape="info-circle" size="22"></clr-icon>
                            <clr-tooltip-content clrPosition="top-right" clrSize="lg" *clrIfOpen>
                                <span>
                                    A PEM formated proxy certificate. This is required only if proxy is handling SSL termination and using Self signed Certificate
                                </span>
                            </clr-tooltip-content>
                        </clr-tooltip>
                    </label>
                    <div class="clr-control-container clr-col-12 no-gutters">
                        <div class="clr-textarea-wrapper">
                            <textarea formControlName="proxyCert" id="proxyCert" placeholder="" class="clr-textarea"></textarea>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </ng-container>
</form>
